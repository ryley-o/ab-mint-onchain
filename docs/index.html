<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta
      name="description"
      content="Art Blocks on-chain minter (experimental)"
    />
    <title>Art Blocks RPC-Only Minter</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <noscript>
      This site requires JavaScript to connect to your wallet.
    </noscript>

    <div id="disclaimerModal" class="modal-overlay">
      <div class="modal-content">
        <h2>‚ö†Ô∏è Experimental Software</h2>
        <div class="disclaimer-text">
          <p>
            This is an <strong>experimental community project</strong> for
            minting Art Blocks directly from the blockchain.
          </p>
          <ul>
            <li>This software is provided "as is" without warranties</li>
            <li>You use this tool entirely at your own risk</li>
            <li>Always test on testnet (Sepolia) before using mainnet</li>
            <li>Double-check all transaction details before confirming</li>
            <li>This is not affiliated with Art Blocks LLC</li>
          </ul>
          <p>
            <strong
              >By continuing, you acknowledge these risks and agree to use this
              experimental software at your own discretion.</strong
            >
          </p>
        </div>
        <div class="modal-actions">
          <button id="acceptDisclaimer" class="button primary">
            I Understand - Continue
          </button>
          <button id="rejectDisclaimer" class="button">Cancel</button>
        </div>
      </div>
    </div>

    <div id="experimentalBanner" class="experimental-banner" hidden>
      üß™ <strong>Experimental:</strong> Community-built on-chain minter. Use at
      your own risk.
    </div>

    <header class="site-header">
      <h1>Art Blocks RPC-Only Minter</h1>
      <p class="tagline">Connect your wallet and mint directly from chain.</p>
      <p class="warning-subtitle">‚ö†Ô∏è Not all projects are supported</p>
    </header>

    <main class="container">
      <section class="card" aria-labelledby="wallet-heading">
        <div class="card-header">
          <h2 id="wallet-heading">Wallet</h2>
          <div class="status" id="connectionStatus" data-status="disconnected">
            <span class="dot" aria-hidden="true"></span>
            <span id="statusText">Not connected</span>
          </div>
        </div>

        <div class="wallet-actions">
          <button id="connectButton" class="button primary">
            Connect Wallet
          </button>
        </div>

        <div id="noProvider" class="alert" hidden>
          No injected wallet detected. Install a wallet like
          <a
            href="https://metamask.io"
            target="_blank"
            rel="noreferrer noopener"
            >MetaMask</a
          >
          and reload.
        </div>

        <dl class="info-grid">
          <div>
            <dt>Account</dt>
            <dd id="accountDisplay">‚Äî</dd>
          </div>
          <div>
            <dt>Network</dt>
            <dd id="chainDisplay">‚Äî</dd>
          </div>
          <div>
            <dt>Balance</dt>
            <dd id="balanceDisplay">‚Äî</dd>
          </div>
        </dl>
      </section>

      <section class="card" aria-labelledby="minter-heading">
        <div class="card-header">
          <h2 id="minter-heading">Minter</h2>
          <span class="badge" id="minterStatus">Disconnected</span>
        </div>

        <form id="minterForm">
          <fieldset id="minterFieldset" disabled>
            <div id="networkWarning" class="alert" hidden>
              Unsupported network. Please switch to Ethereum Mainnet or Sepolia.
            </div>

            <label for="projectSelect">Select Project</label>
            <select id="projectSelect" name="projectId">
              <option value="" selected disabled>‚Äî Choose a project ‚Äî</option>
            </select>

            <div class="help">
              Projects are loaded from a local list per network. Mainnet is
              currently empty; Sepolia includes sample projects.
            </div>

            <div class="actions">
              <button id="loadProject" class="button" type="button" disabled>
                Load Project
              </button>
            </div>
          </fieldset>
        </form>

        <div id="minterInfo" class="minter-info" hidden>
          <h3>Minter Information</h3>
          <dl class="info-grid">
            <div>
              <dt>Minter Address</dt>
              <dd id="minterAddress">‚Äî</dd>
            </div>
            <div>
              <dt>Minter Type</dt>
              <dd id="minterType">‚Äî</dd>
            </div>
          </dl>

          <div id="minterRAMV0Interface" class="minter-interface" hidden>
            <h4>RAM Auction Details</h4>

            <div class="auction-status">
              <span id="auctionStatus" class="status-badge">Loading...</span>
              <span id="allowExtraTime" class="extra-time-badge" hidden
                >Extra Time Allowed</span
              >
              <span id="refreshStatus" class="refresh-status"
                >Refreshing in 30s</span
              >
            </div>

            <div class="auction-timing">
              <div class="timing-item">
                <label>Total Duration</label>
                <span id="totalDuration">‚Äî</span>
              </div>
              <div class="timing-item">
                <label>Time Remaining</label>
                <span id="timeRemaining">‚Äî</span>
              </div>
            </div>

            <div class="auction-stats">
              <div class="stat-group">
                <h5>Auction Overview</h5>
                <div class="stat-grid">
                  <div class="stat">
                    <label>Tokens for Sale</label>
                    <span id="numTokensInAuction">‚Äî</span>
                  </div>
                  <div class="stat">
                    <label>Total Bids</label>
                    <span id="numBids">‚Äî</span>
                  </div>
                  <div class="stat">
                    <label>Minted Tokens</label>
                    <span id="numBidsMintedTokens">‚Äî</span>
                  </div>
                  <div class="stat">
                    <label>Error Refunded</label>
                    <span id="numBidsErrorRefunded">‚Äî</span>
                  </div>
                </div>
              </div>

              <div class="stat-group">
                <h5>Bidding Information</h5>
                <div class="stat-grid">
                  <div class="stat">
                    <label>Current Min Bid</label>
                    <span id="lowestBidValue">‚Äî</span>
                  </div>
                  <div class="stat">
                    <label>Min Next Bid</label>
                    <span id="minimumNextBid">‚Äî</span>
                  </div>
                  <div class="stat">
                    <label>Revenues Collected</label>
                    <span id="revenuesCollected">‚Äî</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="bidding-section">
              <h5>Place Bid</h5>
              <div class="bid-controls">
                <div class="slot-controls">
                  <label>Bid Slot Index</label>
                  <div class="slot-input-group">
                    <button id="slotDecrease10" class="slot-btn" type="button">
                      --
                    </button>
                    <button id="slotDecrease1" class="slot-btn" type="button">
                      -
                    </button>
                    <span id="currentSlotIndex" class="slot-display">0</span>
                    <button id="slotIncrease1" class="slot-btn" type="button">
                      +
                    </button>
                    <button id="slotIncrease10" class="slot-btn" type="button">
                      ++
                    </button>
                  </div>
                </div>

                <div class="bid-value">
                  <label>Bid Amount</label>
                  <span id="currentBidValue" class="bid-amount">‚Äî</span>
                </div>
              </div>

              <div class="bid-actions">
                <button
                  id="createBidButton"
                  class="button primary"
                  type="button"
                  disabled
                >
                  Place Bid
                </button>
              </div>

              <div id="bidSuccess" class="success-alert" hidden>
                <span>‚úÖ Bid placed successfully! </span>
                <a
                  id="txLink"
                  href="#"
                  target="_blank"
                  rel="noopener noreferrer"
                  >View on Etherscan</a
                >
              </div>

              <div id="bidError" class="alert" hidden>
                <span id="bidErrorText"></span>
              </div>
            </div>

            <div class="bid-tracking-section">
              <h5>My Bids</h5>
              <div class="bid-tracking-actions">
                <button id="loadMyBidsButton" class="button" type="button">
                  Load My Bids
                </button>
                <span id="bidScanStatus" class="scan-status"
                  >Ready to scan</span
                >
              </div>

              <div id="myBidsContainer" class="my-bids-container" hidden>
                <div id="myBidsList" class="my-bids-list">
                  <!-- Bids will be populated here -->
                </div>
              </div>

              <div id="bidTopupSection" class="bid-topup-section" hidden>
                <h6>Top Up Selected Bid</h6>
                <div class="topup-info">
                  <div class="current-bid-info">
                    <label>Current Bid</label>
                    <span id="selectedBidInfo">‚Äî</span>
                  </div>
                  <div class="topup-controls">
                    <label>New Slot Index</label>
                    <div class="slot-input-group">
                      <button
                        id="topupSlotDecrease10"
                        class="slot-btn"
                        type="button"
                      >
                        --
                      </button>
                      <button
                        id="topupSlotDecrease1"
                        class="slot-btn"
                        type="button"
                      >
                        -
                      </button>
                      <span id="topupSlotIndex" class="slot-display">0</span>
                      <button
                        id="topupSlotIncrease1"
                        class="slot-btn"
                        type="button"
                      >
                        +
                      </button>
                      <button
                        id="topupSlotIncrease10"
                        class="slot-btn"
                        type="button"
                      >
                        ++
                      </button>
                    </div>
                  </div>
                  <div class="topup-value">
                    <label>Additional Amount</label>
                    <span id="topupBidValue" class="bid-amount">‚Äî</span>
                  </div>
                </div>
                <div class="topup-actions">
                  <button
                    id="topupBidButton"
                    class="button primary"
                    type="button"
                    disabled
                  >
                    Top Up Bid
                  </button>
                </div>

                <div id="topupSuccess" class="success-alert" hidden>
                  <span>‚úÖ Bid topped up successfully! </span>
                  <a
                    id="topupTxLink"
                    href="#"
                    target="_blank"
                    rel="noopener noreferrer"
                    >View on Etherscan</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="minterError" class="alert" hidden>
          <span id="minterErrorText"></span>
        </div>
      </section>

      <section class="card muted" aria-labelledby="notes-heading">
        <h2 id="notes-heading">Notes</h2>
        <ul>
          <li>
            This prototype uses only your wallet's injected RPC (EIP‚Äë1193
            provider).
          </li>
          <li>
            <strong>Experimental software:</strong> Use at your own risk. Always
            test on testnet before using mainnet.
          </li>
        </ul>
      </section>
    </main>

    <footer class="site-footer">
      <small>
        Built for GitHub Pages. Experimental; use at your own risk.
      </small>
    </footer>

    <script type="module" src="./app.js"></script>
  </body>
</html>
